{"ast":null,"code":"import * as fs from 'fs';\nimport * as path from 'path';\nclass LibraryModel {\n  static getLibraryPath(userName) {\n    return path.join(__dirname, 'data', `${userName}.lib.json`);\n  }\n  static readLibrary(userName) {\n    const libraryPath = LibraryModel.getLibraryPath(userName);\n    const data = fs.readFileSync(libraryPath, 'utf-8');\n    return JSON.parse(data);\n  }\n  static writeLibrary(userName, library) {\n    const libraryPath = LibraryModel.getLibraryPath(userName);\n    fs.writeFileSync(libraryPath, JSON.stringify(library, null, 2), 'utf-8');\n  }\n  static addVideo(userName, video) {\n    const library = LibraryModel.readLibrary(userName);\n    library.videos.push(video);\n    LibraryModel.writeLibrary(userName, library);\n    console.log(`Video with ID: ${video.id} added to the library of user: ${library.name}`);\n  }\n  static removeVideo(userName, videoId) {\n    const library = LibraryModel.readLibrary(userName);\n    const videoIndex = library.videos.findIndex(video => video.id === videoId);\n    if (videoIndex !== -1) {\n      library.videos.splice(videoIndex, 1);\n      LibraryModel.writeLibrary(userName, library);\n      console.log(`Video with ID: ${videoId} removed from the library of user: ${library.name}`);\n    } else {\n      console.log(`Video with ID: ${videoId} not found in the library of user: ${library.name}`);\n    }\n  }\n}\nexport default LibraryModel;","map":{"version":3,"names":["fs","path","LibraryModel","getLibraryPath","userName","join","__dirname","readLibrary","libraryPath","data","readFileSync","JSON","parse","writeLibrary","library","writeFileSync","stringify","addVideo","video","videos","push","console","log","id","name","removeVideo","videoId","videoIndex","findIndex","splice"],"sources":["C:/Users/Driss/OneDrive/Documents/Youtube_Library/youtube_library/src/backend/model/LibraryModel.ts"],"sourcesContent":["import * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\ninterface Video {\r\n  title: string;\r\n  id: string;\r\n}\r\n\r\ninterface UserLibrary {\r\n  name: string;\r\n  videos: Video[];\r\n}\r\n\r\nclass LibraryModel {\r\n  private static getLibraryPath(userName: string): string {\r\n    return path.join(__dirname, 'data', `${userName}.lib.json`);\r\n  }\r\n\r\n  private static readLibrary(userName: string): UserLibrary {\r\n    const libraryPath = LibraryModel.getLibraryPath(userName);\r\n    const data = fs.readFileSync(libraryPath, 'utf-8');\r\n    return JSON.parse(data) as UserLibrary;\r\n  }\r\n\r\n  private static writeLibrary(userName: string, library: UserLibrary): void {\r\n    const libraryPath = LibraryModel.getLibraryPath(userName);\r\n    fs.writeFileSync(libraryPath, JSON.stringify(library, null, 2), 'utf-8');\r\n  }\r\n\r\n  public static addVideo(userName: string, video: Video): void {\r\n    const library = LibraryModel.readLibrary(userName);\r\n    library.videos.push(video);\r\n    LibraryModel.writeLibrary(userName, library);\r\n    console.log(`Video with ID: ${video.id} added to the library of user: ${library.name}`);\r\n  }\r\n\r\n  public static removeVideo(userName: string, videoId: string): void {\r\n    const library = LibraryModel.readLibrary(userName);\r\n    const videoIndex = library.videos.findIndex(video => video.id === videoId);\r\n\r\n    if (videoIndex !== -1) {\r\n      library.videos.splice(videoIndex, 1);\r\n      LibraryModel.writeLibrary(userName, library);\r\n      console.log(`Video with ID: ${videoId} removed from the library of user: ${library.name}`);\r\n    } else {\r\n      console.log(`Video with ID: ${videoId} not found in the library of user: ${library.name}`);\r\n    }\r\n  }\r\n}\r\n\r\nexport default LibraryModel;\r\n"],"mappings":"AAAA,OAAO,KAAKA,EAAE,MAAM,IAAI;AACxB,OAAO,KAAKC,IAAI,MAAM,MAAM;AAY5B,MAAMC,YAAY,CAAC;EACjB,OAAeC,cAAcA,CAACC,QAAgB,EAAU;IACtD,OAAOH,IAAI,CAACI,IAAI,CAACC,SAAS,EAAE,MAAM,EAAE,GAAGF,QAAQ,WAAW,CAAC;EAC7D;EAEA,OAAeG,WAAWA,CAACH,QAAgB,EAAe;IACxD,MAAMI,WAAW,GAAGN,YAAY,CAACC,cAAc,CAACC,QAAQ,CAAC;IACzD,MAAMK,IAAI,GAAGT,EAAE,CAACU,YAAY,CAACF,WAAW,EAAE,OAAO,CAAC;IAClD,OAAOG,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC;EACzB;EAEA,OAAeI,YAAYA,CAACT,QAAgB,EAAEU,OAAoB,EAAQ;IACxE,MAAMN,WAAW,GAAGN,YAAY,CAACC,cAAc,CAACC,QAAQ,CAAC;IACzDJ,EAAE,CAACe,aAAa,CAACP,WAAW,EAAEG,IAAI,CAACK,SAAS,CAACF,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,CAAC;EAC1E;EAEA,OAAcG,QAAQA,CAACb,QAAgB,EAAEc,KAAY,EAAQ;IAC3D,MAAMJ,OAAO,GAAGZ,YAAY,CAACK,WAAW,CAACH,QAAQ,CAAC;IAClDU,OAAO,CAACK,MAAM,CAACC,IAAI,CAACF,KAAK,CAAC;IAC1BhB,YAAY,CAACW,YAAY,CAACT,QAAQ,EAAEU,OAAO,CAAC;IAC5CO,OAAO,CAACC,GAAG,CAAC,kBAAkBJ,KAAK,CAACK,EAAE,kCAAkCT,OAAO,CAACU,IAAI,EAAE,CAAC;EACzF;EAEA,OAAcC,WAAWA,CAACrB,QAAgB,EAAEsB,OAAe,EAAQ;IACjE,MAAMZ,OAAO,GAAGZ,YAAY,CAACK,WAAW,CAACH,QAAQ,CAAC;IAClD,MAAMuB,UAAU,GAAGb,OAAO,CAACK,MAAM,CAACS,SAAS,CAACV,KAAK,IAAIA,KAAK,CAACK,EAAE,KAAKG,OAAO,CAAC;IAE1E,IAAIC,UAAU,KAAK,CAAC,CAAC,EAAE;MACrBb,OAAO,CAACK,MAAM,CAACU,MAAM,CAACF,UAAU,EAAE,CAAC,CAAC;MACpCzB,YAAY,CAACW,YAAY,CAACT,QAAQ,EAAEU,OAAO,CAAC;MAC5CO,OAAO,CAACC,GAAG,CAAC,kBAAkBI,OAAO,sCAAsCZ,OAAO,CAACU,IAAI,EAAE,CAAC;IAC5F,CAAC,MAAM;MACLH,OAAO,CAACC,GAAG,CAAC,kBAAkBI,OAAO,sCAAsCZ,OAAO,CAACU,IAAI,EAAE,CAAC;IAC5F;EACF;AACF;AAEA,eAAetB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}